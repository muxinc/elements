"use strict";var j=Object.defineProperty;var ft=Object.getOwnPropertyDescriptor;var mt=Object.getOwnPropertyNames;var bt=Object.prototype.hasOwnProperty;var tt=e=>{throw TypeError(e)};var At=(e,s,t)=>s in e?j(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var gt=(e,s)=>{for(var t in s)j(e,t,{get:s[t],enumerable:!0})},pt=(e,s,t,n)=>{if(s&&typeof s=="object"||typeof s=="function")for(let c of mt(s))!bt.call(e,c)&&c!==t&&j(e,c,{get:()=>s[c],enumerable:!(n=ft(s,c))||n.enumerable});return e};var Et=e=>pt(j({},"__esModule",{value:!0}),e);var P=(e,s,t)=>At(e,typeof s!="symbol"?s+"":s,t),q=(e,s,t)=>s.has(e)||tt("Cannot "+t);var d=(e,s,t)=>(q(e,s,"read from private field"),t?t.call(e):s.get(e)),A=(e,s,t)=>s.has(e)?tt("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(e):s.set(e,t),g=(e,s,t,n)=>(q(e,s,"write to private field"),n?n.call(e,t):s.set(e,t),t),b=(e,s,t)=>(q(e,s,"access private method"),t);var Ot={};gt(Ot,{Attributes:()=>i,AudioEvents:()=>Q,MediaError:()=>l.MediaError,default:()=>Nt,generatePlayerInitTime:()=>l.generatePlayerInitTime,playerSoftwareName:()=>Z,playerSoftwareVersion:()=>X});module.exports=Et(Ot);var S=class{addEventListener(){}removeEventListener(){}dispatchEvent(s){return!0}};if(typeof DocumentFragment=="undefined"){class e extends S{}globalThis.DocumentFragment=e}var w=class extends S{},F=class extends S{},Tt={get(e){},define(e,s,t){},getName(e){return null},upgrade(e){},whenDefined(e){return Promise.resolve(w)}},K,z=class{constructor(s,t={}){A(this,K);g(this,K,t==null?void 0:t.detail)}get detail(){return d(this,K)}initCustomEvent(){}};K=new WeakMap;function yt(e,s){return new w}var et={document:{createElement:yt},DocumentFragment,customElements:Tt,CustomEvent:z,EventTarget:S,HTMLElement:w,HTMLVideoElement:F},it=typeof window=="undefined"||typeof globalThis.customElements=="undefined",H=it?et:globalThis,Lt=it?et.document:globalThis.document;var l=require("@mux/playback-core");var _t=()=>{try{return"0.15.8"}catch{}return"UNKNOWN"},Mt=_t(),st=()=>Mt;var Q=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"],ot=["autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"];function Ct(e){return`
    <style>
      :host {
        display: inline-flex;
        line-height: 0;
        flex-direction: column;
        justify-content: end;
      }

      audio {
        width: 100%;
      }
    </style>
    <slot name="media">
      <audio${ht(e)}></audio>
    </slot>
    <slot></slot>
  `}function Pt(e){return`
    <style>
      :host {
        display: inline-block;
        line-height: 0;
      }

      video {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, 50% 50%);
      }

      video::-webkit-media-text-track-container {
        transform: var(--media-webkit-text-track-transform);
        transition: var(--media-webkit-text-track-transition);
      }
    </style>
    <slot name="media">
      <video${ht(e)}></video>
    </slot>
    <slot></slot>
  `}function ct(e,{tag:s,is:t}){var T,C,p,E,_,at,v,L,M,D,h,k,W,ut,J,dt,lt;let n=(C=(T=globalThis.document)==null?void 0:T.createElement)==null?void 0:C.call(T,s,{is:t}),c=n?kt(n):[];return p=class extends e{constructor(){super(...arguments);A(this,h);A(this,v,!1);A(this,L,null);A(this,M,new Map);A(this,D);P(this,"get");P(this,"set");P(this,"call")}static get observedAttributes(){var o,f,u;return b(o=p,_,at).call(o),[...(u=(f=n==null?void 0:n.constructor)==null?void 0:f.observedAttributes)!=null?u:[],...ot]}get nativeEl(){var r,o,f,u,a;return b(this,h,k).call(this),(a=(u=(o=(r=d(this,L))!=null?r:this.querySelector(":scope > [slot=media]"))!=null?o:this.querySelector(s))!=null?u:(f=this.shadowRoot)==null?void 0:f.querySelector(s))!=null?a:null}set nativeEl(r){g(this,L,r)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(r){this.toggleAttribute("muted",r)}get src(){return this.getAttribute("src")}set src(r){this.setAttribute("src",`${r}`)}get preload(){var r,o;return(o=this.getAttribute("preload"))!=null?o:(r=this.nativeEl)==null?void 0:r.preload}set preload(r){this.setAttribute("preload",`${r}`)}init(){var r;if(!this.shadowRoot){this.attachShadow({mode:"open"});let o=It(this.attributes);t&&(o.is=t),s&&(o.part=s),this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(o)}this.nativeEl.muted=this.hasAttribute("muted");for(let o of c)b(this,h,dt).call(this,o);g(this,D,new MutationObserver(b(this,h,ut).bind(this))),this.shadowRoot.addEventListener("slotchange",this),b(this,h,W).call(this);for(let o of this.constructor.Events)(r=this.shadowRoot)==null||r.addEventListener(o,this,!0)}handleEvent(r){if(r.type==="slotchange"){b(this,h,W).call(this);return}r.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(r.type,{detail:r.detail}))}attributeChangedCallback(r,o,f){b(this,h,k).call(this),b(this,h,lt).call(this,r,o,f)}connectedCallback(){b(this,h,k).call(this)}},E=new WeakMap,_=new WeakSet,at=function(){if(d(this,E))return;g(this,E,!0);let r=new Set(this.observedAttributes);r.delete("muted");for(let o of c)if(!(o in this.prototype))if(typeof n[o]=="function")this.prototype[o]=function(...f){return b(this,h,k).call(this),(()=>{var m;if(this.call)return this.call(o,...f);let a=(m=this.nativeEl)==null?void 0:m[o];return a==null?void 0:a.apply(this.nativeEl,f)})()};else{let f={get(){var a,m,x;b(this,h,k).call(this);let u=o.toLowerCase();if(r.has(u)){let I=this.getAttribute(u);return I===null?!1:I===""?!0:I}return(x=(a=this.get)==null?void 0:a.call(this,o))!=null?x:(m=this.nativeEl)==null?void 0:m[o]}};o!==o.toUpperCase()&&(f.set=function(u){b(this,h,k).call(this);let a=o.toLowerCase();if(r.has(a)){u===!0||u===!1||u==null?this.toggleAttribute(a,!!u):this.setAttribute(a,u);return}if(this.set){this.set(o,u);return}this.nativeEl&&(this.nativeEl[o]=u)}),Object.defineProperty(this.prototype,o,f)}},v=new WeakMap,L=new WeakMap,M=new WeakMap,D=new WeakMap,h=new WeakSet,k=function(){d(this,v)||(g(this,v,!0),this.init())},W=function(){var u;let r=new Map(d(this,M)),o=(u=this.shadowRoot)==null?void 0:u.querySelector("slot:not([name])");(o==null?void 0:o.assignedElements({flatten:!0}).filter(a=>["track","source"].includes(a.localName))).forEach(a=>{var x,I;r.delete(a);let m=d(this,M).get(a);m||(m=a.cloneNode(),d(this,M).set(a,m),(x=d(this,D))==null||x.observe(a,{attributes:!0})),(I=this.nativeEl)==null||I.append(m),b(this,h,J).call(this,m)}),r.forEach((a,m)=>{a.remove(),d(this,M).delete(m)})},ut=function(r){var o;for(let f of r)if(f.type==="attributes"){let{target:u,attributeName:a}=f,m=d(this,M).get(u);m&&a&&(m.setAttribute(a,(o=u.getAttribute(a))!=null?o:""),b(this,h,J).call(this,m))}},J=function(r){r&&r.localName==="track"&&r.default&&(r.kind==="chapters"||r.kind==="metadata")&&r.track.mode==="disabled"&&(r.track.mode="hidden")},dt=function(r){if(Object.prototype.hasOwnProperty.call(this,r)){let o=this[r];delete this[r],this[r]=o}},lt=function(r,o,f){var u,a,m;["id","class"].includes(r)||!p.observedAttributes.includes(r)&&this.constructor.observedAttributes.includes(r)||(f===null?(u=this.nativeEl)==null||u.removeAttribute(r):((a=this.nativeEl)==null?void 0:a.getAttribute(r))!==f&&((m=this.nativeEl)==null||m.setAttribute(r,f)))},A(p,_),P(p,"getTemplateHTML",s.endsWith("audio")?Ct:Pt),P(p,"shadowRootOptions",{mode:"open"}),P(p,"Events",Q),A(p,E,!1),p}function kt(e){let s=[];for(let t=Object.getPrototypeOf(e);t&&t!==HTMLElement.prototype;t=Object.getPrototypeOf(t)){let n=Object.getOwnPropertyNames(t);s.push(...n)}return s}function ht(e){let s="";for(let t in e){if(!ot.includes(t))continue;let n=e[t];n===""?s+=` ${t}`:s+=` ${t}="${n}"`}return s}function It(e){let s={};for(let t of e)s[t.name]=t.value;return s}var rt,Kt=ct((rt=globalThis.HTMLElement)!=null?rt:class{},{tag:"video"}),nt,$=ct((nt=globalThis.HTMLElement)!=null?nt:class{},{tag:"audio"});var i={PLAYER_INIT_TIME:"player-init-time",ENV_KEY:"env-key",DEBUG:"debug",PLAYBACK_ID:"playback-id",PLAYBACK_TOKEN:"playback-token",PROGRAM_START_TIME:"program-start-time",PROGRAM_END_TIME:"program-end-time",ASSET_START_TIME:"asset-start-time",ASSET_END_TIME:"asset-end-time",METADATA_URL:"metadata-url",PREFER_PLAYBACK:"prefer-playback",CUSTOM_DOMAIN:"custom-domain",BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",DISABLE_TRACKING:"disable-tracking",DISABLE_COOKIES:"disable-cookies",TYPE:"type",STREAM_TYPE:"stream-type",START_TIME:"start-time"},St=Object.values(i),X=st(),Z="mux-audio",y,N,Y,O,G,U,R,V,B=class extends ${constructor(){super();A(this,R);A(this,y);A(this,N);A(this,Y);A(this,O,{});A(this,G,{});A(this,U);g(this,Y,(0,l.generatePlayerInitTime)())}static get NAME(){return Z}static get VERSION(){return X}static get observedAttributes(){var t;return[...St,...(t=$.observedAttributes)!=null?t:[]]}get playerInitTime(){return this.hasAttribute(i.PLAYER_INIT_TIME)?+this.getAttribute(i.PLAYER_INIT_TIME):d(this,Y)}set playerInitTime(t){t!=this.playerInitTime&&(t==null?this.removeAttribute(i.PLAYER_INIT_TIME):this.setAttribute(i.PLAYER_INIT_TIME,`${+t}`))}get playerSoftwareName(){return Z}get playerSoftwareVersion(){return X}get _hls(){var t;return(t=d(this,y))==null?void 0:t.engine}get mux(){return this.nativeEl.mux}get src(){return this.getAttribute("src")}set src(t){t!==this.src&&(t==null?this.removeAttribute("src"):this.setAttribute("src",t))}get preload(){let t=this.getAttribute("preload");return t===""?"auto":["none","metadata","auto"].includes(t)?t:super.preload}set preload(t){t!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(t)?this.setAttribute("preload",t):this.removeAttribute("preload"))}get debug(){return this.getAttribute(i.DEBUG)!=null}set debug(t){t!==this.debug&&(t?this.setAttribute(i.DEBUG,""):this.removeAttribute(i.DEBUG))}get disableTracking(){return this.hasAttribute(i.DISABLE_TRACKING)}set disableTracking(t){t!==this.disableTracking&&this.toggleAttribute(i.DISABLE_TRACKING,!!t)}get disableCookies(){return this.hasAttribute(i.DISABLE_COOKIES)}set disableCookies(t){t!==this.disableCookies&&(t?this.setAttribute(i.DISABLE_COOKIES,""):this.removeAttribute(i.DISABLE_COOKIES))}get startTime(){let t=this.getAttribute(i.START_TIME);if(t==null)return;let n=+t;return Number.isNaN(n)?void 0:n}set startTime(t){t!==this.startTime&&(t==null?this.removeAttribute(i.START_TIME):this.setAttribute(i.START_TIME,`${t}`))}get playbackId(){var t;return(t=this.getAttribute(i.PLAYBACK_ID))!=null?t:void 0}set playbackId(t){t!==this.playbackId&&(t?this.setAttribute(i.PLAYBACK_ID,t):this.removeAttribute(i.PLAYBACK_ID))}get programStartTime(){let t=this.getAttribute(i.PROGRAM_START_TIME);if(t==null)return;let n=+t;return Number.isNaN(n)?void 0:n}set programStartTime(t){t==null?this.removeAttribute(i.PROGRAM_START_TIME):this.setAttribute(i.PROGRAM_START_TIME,`${t}`)}get programEndTime(){let t=this.getAttribute(i.PROGRAM_END_TIME);if(t==null)return;let n=+t;return Number.isNaN(n)?void 0:n}set programEndTime(t){t==null?this.removeAttribute(i.PROGRAM_END_TIME):this.setAttribute(i.PROGRAM_END_TIME,`${t}`)}get assetStartTime(){let t=this.getAttribute(i.ASSET_START_TIME);if(t==null)return;let n=+t;return Number.isNaN(n)?void 0:n}set assetStartTime(t){t==null?this.removeAttribute(i.ASSET_START_TIME):this.setAttribute(i.ASSET_START_TIME,`${t}`)}get assetEndTime(){let t=this.getAttribute(i.ASSET_END_TIME);if(t==null)return;let n=+t;return Number.isNaN(n)?void 0:n}set assetEndTime(t){t==null?this.removeAttribute(i.ASSET_END_TIME):this.setAttribute(i.ASSET_END_TIME,`${t}`)}get customDomain(){var t;return(t=this.getAttribute(i.CUSTOM_DOMAIN))!=null?t:void 0}set customDomain(t){t!==this.customDomain&&(t?this.setAttribute(i.CUSTOM_DOMAIN,t):this.removeAttribute(i.CUSTOM_DOMAIN))}get playbackToken(){var t,n,c,T;if(this.hasAttribute(i.PLAYBACK_TOKEN))return(t=this.getAttribute(i.PLAYBACK_TOKEN))!=null?t:void 0;if(this.hasAttribute(i.PLAYBACK_ID)){let[,C]=(0,l.toPlaybackIdParts)((n=this.playbackId)!=null?n:"");return(c=new URLSearchParams(C).get("token"))!=null?c:void 0}if(this.src)return(T=new URLSearchParams(this.src).get("token"))!=null?T:void 0}set playbackToken(t){t!==this.playbackToken&&(t?this.setAttribute(i.PLAYBACK_TOKEN,t):this.removeAttribute(i.PLAYBACK_TOKEN))}get tokens(){let t=this.getAttribute(i.PLAYBACK_TOKEN);return{...d(this,G),...t!=null?{playback:t}:{}}}set tokens(t){g(this,G,t!=null?t:{})}get ended(){return(0,l.getEnded)(this.nativeEl,this._hls)}get envKey(){var t;return(t=this.getAttribute(i.ENV_KEY))!=null?t:void 0}set envKey(t){t!==this.envKey&&(t?this.setAttribute(i.ENV_KEY,t):this.removeAttribute(i.ENV_KEY))}get beaconCollectionDomain(){var t;return(t=this.getAttribute(i.BEACON_COLLECTION_DOMAIN))!=null?t:void 0}set beaconCollectionDomain(t){t!==this.beaconCollectionDomain&&(t?this.setAttribute(i.BEACON_COLLECTION_DOMAIN,t):this.removeAttribute(i.BEACON_COLLECTION_DOMAIN))}get streamType(){var t;return(t=this.getAttribute(i.STREAM_TYPE))!=null?t:void 0}set streamType(t){t!==this.streamType&&(t?this.setAttribute(i.STREAM_TYPE,t):this.removeAttribute(i.STREAM_TYPE))}getStartDate(){return(0,l.getStartDate)(this.nativeEl,this._hls)}get currentPdt(){return(0,l.getCurrentPdt)(this.nativeEl,this._hls)}get preferPlayback(){let t=this.getAttribute(i.PREFER_PLAYBACK);if(t===l.PlaybackTypes.MSE||t===l.PlaybackTypes.NATIVE)return t}set preferPlayback(t){t!==this.preferPlayback&&(t===l.PlaybackTypes.MSE||t===l.PlaybackTypes.NATIVE?this.setAttribute(i.PREFER_PLAYBACK,t):this.removeAttribute(i.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter(n=>n.startsWith("metadata-")&&![i.METADATA_URL].includes(n)).reduce((n,c)=>{let T=this.getAttribute(c);return T!=null&&(n[c.replace(/^metadata-/,"").replace(/-/g,"_")]=T),n},{}),...d(this,O)}}set metadata(t){g(this,O,t!=null?t:{}),this.mux&&(console.info("Some metadata values may not be overridable at this time. Make sure you set all metadata to override before setting the src."),this.mux.emit("hb",d(this,O)))}get _hlsConfig(){return d(this,U)}set _hlsConfig(t){g(this,U,t)}load(){g(this,y,(0,l.initialize)(this,this.nativeEl,d(this,y)))}unload(){(0,l.teardown)(this.nativeEl,d(this,y)),g(this,y,void 0)}attributeChangedCallback(t,n,c){var C,p;switch($.observedAttributes.includes(t)&&!["src","autoplay","preload"].includes(t)&&super.attributeChangedCallback(t,n,c),t){case"src":{let E=!!n,_=!!c;!E&&_?b(this,R,V).call(this):E&&!_?this.unload():E&&_&&(this.unload(),b(this,R,V).call(this));break}case"autoplay":if(c===n)break;(C=d(this,y))==null||C.setAutoplay(this.autoplay);break;case"preload":if(c===n)break;(p=d(this,y))==null||p.setPreload(c);break;case i.PLAYBACK_ID:this.src=(0,l.toMuxVideoURL)(this);break;case i.DEBUG:{let E=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=E);break}case i.METADATA_URL:c&&fetch(c).then(E=>E.json()).then(E=>this.metadata=E).catch(()=>console.error(`Unable to load or parse metadata JSON from metadata-url ${c}!`));break;default:break}}connectedCallback(){var t;(t=super.connectedCallback)==null||t.call(this),this.nativeEl&&this.src&&!d(this,y)&&b(this,R,V).call(this)}disconnectedCallback(){this.unload()}};y=new WeakMap,N=new WeakMap,Y=new WeakMap,O=new WeakMap,G=new WeakMap,U=new WeakMap,R=new WeakSet,V=async function(){d(this,N)||(await g(this,N,Promise.resolve()),g(this,N,null),this.load())};H.customElements.get("mux-audio")||(H.customElements.define("mux-audio",B),H.MuxAudioElement=B);var Nt=B;
//# sourceMappingURL=index.cjs.js.map
