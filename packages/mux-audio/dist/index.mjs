var ht=Object.defineProperty;var J=s=>{throw TypeError(s)};var ft=(s,r,t)=>r in s?ht(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var C=(s,r,t)=>ft(s,typeof r!="symbol"?r+"":r,t),V=(s,r,t)=>r.has(s)||J("Cannot "+t);var d=(s,r,t)=>(V(s,r,"read from private field"),t?t.call(s):r.get(s)),m=(s,r,t)=>r.has(s)?J("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(s):r.set(s,t),A=(s,r,t,n)=>(V(s,r,"write to private field"),n?n.call(s,t):r.set(s,t),t),f=(s,r,t)=>(V(s,r,"access private method"),t);var I=class{addEventListener(){}removeEventListener(){}dispatchEvent(r){return!0}};if(typeof DocumentFragment=="undefined"){class s extends I{}globalThis.DocumentFragment=s}var x=class extends I{},q=class extends I{},mt={get(s){},define(s,r,t){},getName(s){return null},upgrade(s){},whenDefined(s){return Promise.resolve(x)}},w,F=class{constructor(r,t={}){m(this,w);A(this,w,t==null?void 0:t.detail)}get detail(){return d(this,w)}initCustomEvent(){}};w=new WeakMap;function bt(s,r){return new x}var Q={document:{createElement:bt},DocumentFragment,customElements:mt,CustomEvent:F,EventTarget:I,HTMLElement:x,HTMLVideoElement:q},X=typeof window=="undefined"||typeof globalThis.customElements=="undefined",U=X?Q:globalThis,Lt=X?Q.document:globalThis.document;import{initialize as _t,teardown as Mt,generatePlayerInitTime as Ct,PlaybackTypes as H,toMuxVideoURL as Pt,MediaError as $t,getStartDate as kt,getCurrentPdt as It,getEnded as St,toPlaybackIdParts as Nt}from"@mux/playback-core";var At=()=>{try{return"0.15.8"}catch{}return"UNKNOWN"},gt=At(),Z=()=>gt;var it=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"],st=["autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"];function pt(s){return`
    <style>
      :host {
        display: inline-flex;
        line-height: 0;
        flex-direction: column;
        justify-content: end;
      }

      audio {
        width: 100%;
      }
    </style>
    <slot name="media">
      <audio${dt(s)}></audio>
    </slot>
    <slot></slot>
  `}function Et(s){return`
    <style>
      :host {
        display: inline-block;
        line-height: 0;
      }

      video {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, 50% 50%);
      }

      video::-webkit-media-text-track-container {
        transform: var(--media-webkit-text-track-transform);
        transition: var(--media-webkit-text-track-transition);
      }
    </style>
    <slot name="media">
      <video${dt(s)}></video>
    </slot>
    <slot></slot>
  `}function ut(s,{tag:r,is:t}){var E,M,g,p,y,rt,R,v,_,L,l,P,z,nt,W,ot,at;let n=(M=(E=globalThis.document)==null?void 0:E.createElement)==null?void 0:M.call(E,r,{is:t}),b=n?Tt(n):[];return g=class extends s{constructor(){super(...arguments);m(this,l);m(this,R,!1);m(this,v,null);m(this,_,new Map);m(this,L);C(this,"get");C(this,"set");C(this,"call")}static get observedAttributes(){var o,c,u;return f(o=g,y,rt).call(o),[...(u=(c=n==null?void 0:n.constructor)==null?void 0:c.observedAttributes)!=null?u:[],...st]}get nativeEl(){var i,o,c,u,a;return f(this,l,P).call(this),(a=(u=(o=(i=d(this,v))!=null?i:this.querySelector(":scope > [slot=media]"))!=null?o:this.querySelector(r))!=null?u:(c=this.shadowRoot)==null?void 0:c.querySelector(r))!=null?a:null}set nativeEl(i){A(this,v,i)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(i){this.toggleAttribute("muted",i)}get src(){return this.getAttribute("src")}set src(i){this.setAttribute("src",`${i}`)}get preload(){var i,o;return(o=this.getAttribute("preload"))!=null?o:(i=this.nativeEl)==null?void 0:i.preload}set preload(i){this.setAttribute("preload",`${i}`)}init(){var i;if(!this.shadowRoot){this.attachShadow({mode:"open"});let o=yt(this.attributes);t&&(o.is=t),r&&(o.part=r),this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(o)}this.nativeEl.muted=this.hasAttribute("muted");for(let o of b)f(this,l,ot).call(this,o);A(this,L,new MutationObserver(f(this,l,nt).bind(this))),this.shadowRoot.addEventListener("slotchange",this),f(this,l,z).call(this);for(let o of this.constructor.Events)(i=this.shadowRoot)==null||i.addEventListener(o,this,!0)}handleEvent(i){if(i.type==="slotchange"){f(this,l,z).call(this);return}i.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(i.type,{detail:i.detail}))}attributeChangedCallback(i,o,c){f(this,l,P).call(this),f(this,l,at).call(this,i,o,c)}connectedCallback(){f(this,l,P).call(this)}},p=new WeakMap,y=new WeakSet,rt=function(){if(d(this,p))return;A(this,p,!0);let i=new Set(this.observedAttributes);i.delete("muted");for(let o of b)if(!(o in this.prototype))if(typeof n[o]=="function")this.prototype[o]=function(...c){return f(this,l,P).call(this),(()=>{var h;if(this.call)return this.call(o,...c);let a=(h=this.nativeEl)==null?void 0:h[o];return a==null?void 0:a.apply(this.nativeEl,c)})()};else{let c={get(){var a,h,D;f(this,l,P).call(this);let u=o.toLowerCase();if(i.has(u)){let k=this.getAttribute(u);return k===null?!1:k===""?!0:k}return(D=(a=this.get)==null?void 0:a.call(this,o))!=null?D:(h=this.nativeEl)==null?void 0:h[o]}};o!==o.toUpperCase()&&(c.set=function(u){f(this,l,P).call(this);let a=o.toLowerCase();if(i.has(a)){u===!0||u===!1||u==null?this.toggleAttribute(a,!!u):this.setAttribute(a,u);return}if(this.set){this.set(o,u);return}this.nativeEl&&(this.nativeEl[o]=u)}),Object.defineProperty(this.prototype,o,c)}},R=new WeakMap,v=new WeakMap,_=new WeakMap,L=new WeakMap,l=new WeakSet,P=function(){d(this,R)||(A(this,R,!0),this.init())},z=function(){var u;let i=new Map(d(this,_)),o=(u=this.shadowRoot)==null?void 0:u.querySelector("slot:not([name])");(o==null?void 0:o.assignedElements({flatten:!0}).filter(a=>["track","source"].includes(a.localName))).forEach(a=>{var D,k;i.delete(a);let h=d(this,_).get(a);h||(h=a.cloneNode(),d(this,_).set(a,h),(D=d(this,L))==null||D.observe(a,{attributes:!0})),(k=this.nativeEl)==null||k.append(h),f(this,l,W).call(this,h)}),i.forEach((a,h)=>{a.remove(),d(this,_).delete(h)})},nt=function(i){var o;for(let c of i)if(c.type==="attributes"){let{target:u,attributeName:a}=c,h=d(this,_).get(u);h&&a&&(h.setAttribute(a,(o=u.getAttribute(a))!=null?o:""),f(this,l,W).call(this,h))}},W=function(i){i&&i.localName==="track"&&i.default&&(i.kind==="chapters"||i.kind==="metadata")&&i.track.mode==="disabled"&&(i.track.mode="hidden")},ot=function(i){if(Object.prototype.hasOwnProperty.call(this,i)){let o=this[i];delete this[i],this[i]=o}},at=function(i,o,c){var u,a,h;["id","class"].includes(i)||!g.observedAttributes.includes(i)&&this.constructor.observedAttributes.includes(i)||(c===null?(u=this.nativeEl)==null||u.removeAttribute(i):((a=this.nativeEl)==null?void 0:a.getAttribute(i))!==c&&((h=this.nativeEl)==null||h.setAttribute(i,c)))},m(g,y),C(g,"getTemplateHTML",r.endsWith("audio")?pt:Et),C(g,"shadowRootOptions",{mode:"open"}),C(g,"Events",it),m(g,p,!1),g}function Tt(s){let r=[];for(let t=Object.getPrototypeOf(s);t&&t!==HTMLElement.prototype;t=Object.getPrototypeOf(t)){let n=Object.getOwnPropertyNames(t);r.push(...n)}return r}function dt(s){let r="";for(let t in s){if(!st.includes(t))continue;let n=s[t];n===""?r+=` ${t}`:r+=` ${t}="${n}"`}return r}function yt(s){let r={};for(let t of s)r[t.name]=t.value;return r}var tt,Kt=ut((tt=globalThis.HTMLElement)!=null?tt:class{},{tag:"video"}),et,j=ut((et=globalThis.HTMLElement)!=null?et:class{},{tag:"audio"});var e={PLAYER_INIT_TIME:"player-init-time",ENV_KEY:"env-key",DEBUG:"debug",PLAYBACK_ID:"playback-id",PLAYBACK_TOKEN:"playback-token",PROGRAM_START_TIME:"program-start-time",PROGRAM_END_TIME:"program-end-time",ASSET_START_TIME:"asset-start-time",ASSET_END_TIME:"asset-end-time",METADATA_URL:"metadata-url",PREFER_PLAYBACK:"prefer-playback",CUSTOM_DOMAIN:"custom-domain",BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",DISABLE_TRACKING:"disable-tracking",DISABLE_COOKIES:"disable-cookies",TYPE:"type",STREAM_TYPE:"stream-type",START_TIME:"start-time"},Ot=Object.values(e),lt=Z(),ct="mux-audio",T,S,B,N,Y,G,O,$,K=class extends j{constructor(){super();m(this,O);m(this,T);m(this,S);m(this,B);m(this,N,{});m(this,Y,{});m(this,G);A(this,B,Ct())}static get NAME(){return ct}static get VERSION(){return lt}static get observedAttributes(){var t;return[...Ot,...(t=j.observedAttributes)!=null?t:[]]}get playerInitTime(){return this.hasAttribute(e.PLAYER_INIT_TIME)?+this.getAttribute(e.PLAYER_INIT_TIME):d(this,B)}set playerInitTime(t){t!=this.playerInitTime&&(t==null?this.removeAttribute(e.PLAYER_INIT_TIME):this.setAttribute(e.PLAYER_INIT_TIME,`${+t}`))}get playerSoftwareName(){return ct}get playerSoftwareVersion(){return lt}get _hls(){var t;return(t=d(this,T))==null?void 0:t.engine}get mux(){return this.nativeEl.mux}get src(){return this.getAttribute("src")}set src(t){t!==this.src&&(t==null?this.removeAttribute("src"):this.setAttribute("src",t))}get preload(){let t=this.getAttribute("preload");return t===""?"auto":["none","metadata","auto"].includes(t)?t:super.preload}set preload(t){t!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(t)?this.setAttribute("preload",t):this.removeAttribute("preload"))}get debug(){return this.getAttribute(e.DEBUG)!=null}set debug(t){t!==this.debug&&(t?this.setAttribute(e.DEBUG,""):this.removeAttribute(e.DEBUG))}get disableTracking(){return this.hasAttribute(e.DISABLE_TRACKING)}set disableTracking(t){t!==this.disableTracking&&this.toggleAttribute(e.DISABLE_TRACKING,!!t)}get disableCookies(){return this.hasAttribute(e.DISABLE_COOKIES)}set disableCookies(t){t!==this.disableCookies&&(t?this.setAttribute(e.DISABLE_COOKIES,""):this.removeAttribute(e.DISABLE_COOKIES))}get startTime(){let t=this.getAttribute(e.START_TIME);if(t==null)return;let n=+t;return Number.isNaN(n)?void 0:n}set startTime(t){t!==this.startTime&&(t==null?this.removeAttribute(e.START_TIME):this.setAttribute(e.START_TIME,`${t}`))}get playbackId(){var t;return(t=this.getAttribute(e.PLAYBACK_ID))!=null?t:void 0}set playbackId(t){t!==this.playbackId&&(t?this.setAttribute(e.PLAYBACK_ID,t):this.removeAttribute(e.PLAYBACK_ID))}get programStartTime(){let t=this.getAttribute(e.PROGRAM_START_TIME);if(t==null)return;let n=+t;return Number.isNaN(n)?void 0:n}set programStartTime(t){t==null?this.removeAttribute(e.PROGRAM_START_TIME):this.setAttribute(e.PROGRAM_START_TIME,`${t}`)}get programEndTime(){let t=this.getAttribute(e.PROGRAM_END_TIME);if(t==null)return;let n=+t;return Number.isNaN(n)?void 0:n}set programEndTime(t){t==null?this.removeAttribute(e.PROGRAM_END_TIME):this.setAttribute(e.PROGRAM_END_TIME,`${t}`)}get assetStartTime(){let t=this.getAttribute(e.ASSET_START_TIME);if(t==null)return;let n=+t;return Number.isNaN(n)?void 0:n}set assetStartTime(t){t==null?this.removeAttribute(e.ASSET_START_TIME):this.setAttribute(e.ASSET_START_TIME,`${t}`)}get assetEndTime(){let t=this.getAttribute(e.ASSET_END_TIME);if(t==null)return;let n=+t;return Number.isNaN(n)?void 0:n}set assetEndTime(t){t==null?this.removeAttribute(e.ASSET_END_TIME):this.setAttribute(e.ASSET_END_TIME,`${t}`)}get customDomain(){var t;return(t=this.getAttribute(e.CUSTOM_DOMAIN))!=null?t:void 0}set customDomain(t){t!==this.customDomain&&(t?this.setAttribute(e.CUSTOM_DOMAIN,t):this.removeAttribute(e.CUSTOM_DOMAIN))}get playbackToken(){var t,n,b,E;if(this.hasAttribute(e.PLAYBACK_TOKEN))return(t=this.getAttribute(e.PLAYBACK_TOKEN))!=null?t:void 0;if(this.hasAttribute(e.PLAYBACK_ID)){let[,M]=Nt((n=this.playbackId)!=null?n:"");return(b=new URLSearchParams(M).get("token"))!=null?b:void 0}if(this.src)return(E=new URLSearchParams(this.src).get("token"))!=null?E:void 0}set playbackToken(t){t!==this.playbackToken&&(t?this.setAttribute(e.PLAYBACK_TOKEN,t):this.removeAttribute(e.PLAYBACK_TOKEN))}get tokens(){let t=this.getAttribute(e.PLAYBACK_TOKEN);return{...d(this,Y),...t!=null?{playback:t}:{}}}set tokens(t){A(this,Y,t!=null?t:{})}get ended(){return St(this.nativeEl,this._hls)}get envKey(){var t;return(t=this.getAttribute(e.ENV_KEY))!=null?t:void 0}set envKey(t){t!==this.envKey&&(t?this.setAttribute(e.ENV_KEY,t):this.removeAttribute(e.ENV_KEY))}get beaconCollectionDomain(){var t;return(t=this.getAttribute(e.BEACON_COLLECTION_DOMAIN))!=null?t:void 0}set beaconCollectionDomain(t){t!==this.beaconCollectionDomain&&(t?this.setAttribute(e.BEACON_COLLECTION_DOMAIN,t):this.removeAttribute(e.BEACON_COLLECTION_DOMAIN))}get streamType(){var t;return(t=this.getAttribute(e.STREAM_TYPE))!=null?t:void 0}set streamType(t){t!==this.streamType&&(t?this.setAttribute(e.STREAM_TYPE,t):this.removeAttribute(e.STREAM_TYPE))}getStartDate(){return kt(this.nativeEl,this._hls)}get currentPdt(){return It(this.nativeEl,this._hls)}get preferPlayback(){let t=this.getAttribute(e.PREFER_PLAYBACK);if(t===H.MSE||t===H.NATIVE)return t}set preferPlayback(t){t!==this.preferPlayback&&(t===H.MSE||t===H.NATIVE?this.setAttribute(e.PREFER_PLAYBACK,t):this.removeAttribute(e.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter(n=>n.startsWith("metadata-")&&![e.METADATA_URL].includes(n)).reduce((n,b)=>{let E=this.getAttribute(b);return E!=null&&(n[b.replace(/^metadata-/,"").replace(/-/g,"_")]=E),n},{}),...d(this,N)}}set metadata(t){A(this,N,t!=null?t:{}),this.mux&&(console.info("Some metadata values may not be overridable at this time. Make sure you set all metadata to override before setting the src."),this.mux.emit("hb",d(this,N)))}get _hlsConfig(){return d(this,G)}set _hlsConfig(t){A(this,G,t)}load(){A(this,T,_t(this,this.nativeEl,d(this,T)))}unload(){Mt(this.nativeEl,d(this,T)),A(this,T,void 0)}attributeChangedCallback(t,n,b){var M,g;switch(j.observedAttributes.includes(t)&&!["src","autoplay","preload"].includes(t)&&super.attributeChangedCallback(t,n,b),t){case"src":{let p=!!n,y=!!b;!p&&y?f(this,O,$).call(this):p&&!y?this.unload():p&&y&&(this.unload(),f(this,O,$).call(this));break}case"autoplay":if(b===n)break;(M=d(this,T))==null||M.setAutoplay(this.autoplay);break;case"preload":if(b===n)break;(g=d(this,T))==null||g.setPreload(b);break;case e.PLAYBACK_ID:this.src=Pt(this);break;case e.DEBUG:{let p=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=p);break}case e.METADATA_URL:b&&fetch(b).then(p=>p.json()).then(p=>this.metadata=p).catch(()=>console.error(`Unable to load or parse metadata JSON from metadata-url ${b}!`));break;default:break}}connectedCallback(){var t;(t=super.connectedCallback)==null||t.call(this),this.nativeEl&&this.src&&!d(this,T)&&f(this,O,$).call(this)}disconnectedCallback(){this.unload()}};T=new WeakMap,S=new WeakMap,B=new WeakMap,N=new WeakMap,Y=new WeakMap,G=new WeakMap,O=new WeakSet,$=async function(){d(this,S)||(await A(this,S,Promise.resolve()),A(this,S,null),this.load())};U.customElements.get("mux-audio")||(U.customElements.define("mux-audio",K),U.MuxAudioElement=K);var Ft=K;export{e as Attributes,it as AudioEvents,$t as MediaError,Ft as default,Ct as generatePlayerInitTime,ct as playerSoftwareName,lt as playerSoftwareVersion};
//# sourceMappingURL=index.mjs.map
