<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width" />
    <title>Basic &lt;mux-player/&gt; example</title>
    <script type="module" src="./dist/mux-player.js"></script>
    <style>
      body {
        margin: 0;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
      }

      mux-player {
        width: 100%;
        max-width: 800px;
        margin: 40px auto;
        display: block;
        aspect-ratio: 16 / 9;
        background-color: #000;
      }

      .buttons {
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
      }

      @media (max-width: 300px) {
        .buttons {
          display: inline-block;
        }
      }

      .buttons button {
        margin: 5px;
      }
    </style>
  </head>
  <body>
    <!-- Test attributes
      style="aspect-ratio: 16 / 10"
      primary-color="#5c6ac4"
      secondary-color="#ecc94b"
      playback-id="xLGf7y8cRquv7QXoDB02zEe6centwKfVmUOiPSY02JhCE"
      poster="https://image.mux.com/xLGf7y8cRquv7QXoDB02zEe6centwKfVmUOiPSY02JhCE/thumbnail.jpg?time=0"
      src="https://stream.mux.com/r4rOE02cc95tbe3I00302nlrHfT023Q3IedFJW029w018KxZA.m3u8"
      muted
      volume="0.4"
      playbackrate="2"
      forward-seek-offset="10"
      backward-seek-offset="10"
     -->

    <mux-player
      stream-type="on-demand"
      playback-id="g65IqSFtWdpGR100c2W8VUHrfIVWTNRen"
      primary-color="#f97316"
      metadata-video-id="video-id-is-dylan"
      metadata-video-title="DID IT WORK DYLAN?????"
      metadata-viewer-user-id="user-id-well-dylan"
    ></mux-player>

    <div class="buttons">
      <button class="dialog-show-btn">Show error dialog</button>
      <button class="dialog-close-btn">Close dialog</button>
    </div>
    <br />

    <script>
      let player = document.querySelector("mux-player");

      player.addEventListener('loadedmetadata', (e) => {
        console.log(111, e)
      });

      document.addEventListener('play', (e) => {
        console.log(222, e);
      }, { capture: true });

      document
        .querySelector(".dialog-show-btn")
        .addEventListener("click", () => {
          player.dispatchEvent(
            new CustomEvent("error", {
              detail: { code: MediaError.MEDIA_ERR_NETWORK },
            })
          );
        });
      document
        .querySelector(".dialog-close-btn")
        .addEventListener("click", () => {
          player.shadowRoot.querySelector("mxp-dialog").close();
        });
    </script>

    <a href="../">Browse Elements</a>
  </body>
</html>
